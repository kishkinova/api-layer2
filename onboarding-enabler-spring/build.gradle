buildscript {
    repositories mavenRepositories

    ext {
        springBootVersion = rootProject.ext.springBootVersion
    }

    dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
    }
}

publish {
    outputs.upToDateWhen { false }
    doLast {
        println "onboarding-enabler-spring has been successfully published"
    }
}

dependencies {
    api project(':apiml-utility')
    api project(':onboarding-enabler-java')

    implementation(libraries.spring_boot_starter_web){
        exclude group: "org.springframework", module: "spring-web"
        exclude group: "org.springframework", module: "spring-webmvc"
        exclude group: "org.springframework", module: "spring-context"
        exclude group: "org.apache.tomcat.embed", module: "tomcat-embed-core"
        exclude group: "org.apache.tomcat.embed", module: "tomcat-embed-el"
        exclude group: "org.apache.tomcat.embed", module: "tomcat-embed-websocket"
        exclude group: "org.yaml", module: "snakeyaml"
        exclude group: "com.fasterxml.jackson.core", module: "jackson-annotations"
        exclude group: "com.fasterxml.jackson.core", module: "jackson-core"
        exclude group: "com.fasterxml.jackson.core", module: "jackson-databind"
    }
    implementation libraries.snakeyaml
    implementation(libraries.tomcat_embed_core) {
        exclude group: "javax.servlet", module: "servlet-api"
    }
    implementation libraries.tomcat_embed_el
    implementation libraries.tomcat_embed_websocket
    implementation libraries.spring_aop
    implementation libraries.spring_beans
    implementation libraries.spring_context
    implementation libraries.spring_core
    implementation libraries.spring_expression
    implementation libraries.spring_web

    compileOnly libraries.lombok
    annotationProcessor libraries.lombok

    compileOnly libraries.javax_inject
    implementation (libraries.eureka_client){
        exclude group: "org.codehaus.jettison", module: "jettison"
        exclude group: "com.thoughtworks.xstream", module: "xstream"
    }
    implementation libraries.xstream
    implementation libraries.jettison

    testImplementation(libraries.spring_boot_starter_test) {
        exclude group: "org.springframework", module: "spring-test"
    }
    testImplementation libraries.spring_test
    testImplementation libraries.json_smart
    testImplementation libraries.mockito_core

    annotationProcessor libraries.spring_boot_configuration_processor
    testImplementation libraries.gson
}

jar {
    baseName = "onboarding-enabler-spring"
    archiveFileName = "${baseName}.jar"
}
